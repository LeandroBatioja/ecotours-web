---
import BaseLayout from "../layouts/BaseLayout.astro";
---

<BaseLayout>

<section class="max-w-md mx-auto px-6 py-20">
  <div class="bg-white dark:bg-gray-800 rounded-3xl shadow-lg p-8">
    <h1 class="text-3xl font-bold text-center text-gray-900 dark:text-white mb-2">Únete a EcoTours</h1>
    <p class="text-center text-gray-500 dark:text-gray-400 mb-8">Crea tu cuenta y empieza a explorar Ecuador</p>

    <form id="register-form" class="space-y-5">
      <div>
        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Nombre completo</label>
        <input type="text" name="name" required
          class="w-full px-4 py-3 rounded-xl border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-forest focus:outline-none" />
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Correo electrónico</label>
        <input type="email" name="email" required
          class="w-full px-4 py-3 rounded-xl border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-forest focus:outline-none" />
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Contraseña</label>
        <input type="password" name="password" required minlength="6"
          class="w-full px-4 py-3 rounded-xl border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-forest focus:outline-none" />
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Confirmar contraseña</label>
        <input type="password" name="confirmPassword" required minlength="6"
          class="w-full px-4 py-3 rounded-xl border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-forest focus:outline-none" />
      </div>

      <p id="error-msg" class="text-red-500 text-sm hidden"></p>

      <button type="submit" id="submit-btn"
        class="w-full bg-forest text-white py-3 rounded-full font-bold text-lg hover:bg-green-700 transition">
        Crear cuenta
      </button>
    </form>

    <p class="text-center text-sm text-gray-500 dark:text-gray-400 mt-6">
      ¿Ya tienes cuenta? <a href="/unirse" class="text-forest font-medium hover:underline">Inicia sesión</a>
    </p>
  </div>
</section>

<script>
  const form = document.getElementById("register-form");
  const errorMsg = document.getElementById("error-msg");
  const submitBtn = document.getElementById("submit-btn");

  form.addEventListener("submit", (e) => {
    e.preventDefault();
    errorMsg.classList.add("hidden");

    const password = form.querySelector('[name="password"]').value;
    const confirm = form.querySelector('[name="confirmPassword"]').value;

    if (password !== confirm) {
      errorMsg.textContent = "Las contraseñas no coinciden.";
      errorMsg.classList.remove("hidden");
      return;
    }

    submitBtn.textContent = "Creando cuenta...";
    submitBtn.disabled = true;

    setTimeout(() => {
      submitBtn.textContent = "¡Cuenta creada!";
      setTimeout(() => {
        window.location.href = "/";
      }, 1000);
    }, 1500);
  });
</script>

</BaseLayout>
